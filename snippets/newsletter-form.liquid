{%- assign newsletter_form_id = 'newsletter-' | append: section_id -%}
{% form 'customer', id: newsletter_form_id %}
  {%- if form.posted_successfully? -%}
    <div class="note note--success">
      {{ 'general.newsletter_form.newsletter_confirmation' | t }}
    </div>
  {%- endif -%}
  {%- if form.errors and form.context == snippet_context -%}
    {{ form.errors | default_errors }}
  {%- endif -%}

  {%- unless form.posted_successfully? -%}
    <label for="Email-{{ section_id }}" class="hidden-label">{{ 'general.newsletter_form.newsletter_email' | t }}</label>
    <input type="hidden" name="contact[tags]" value="prospect,newsletter">
    <input type="hidden" name="contact[context]" value="{{ snippet_context }}">
    <div class="input-group newsletter__input-group">
      <input type="email" value="{% if customer %}{{ customer.email }}{% endif %}" placeholder="{{ 'general.newsletter_form.newsletter_email' | t }}" name="contact[email]" id="Email-{{ section_id }}" class="input-group-field newsletter__input" autocorrect="off" autocapitalize="off">
      <div class="input-group-btn">
        <svg class="icon" width="30" height="21" viewBox="0 0 30 21" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M2.85714 0C1.27196 0 0 1.33333 0 2.93529V17.7679C0 19.3698 1.27196 20.7143 2.85714 20.7143H27.1429C28.7281 20.7143 30 19.3698 30 17.7679V2.93529C30 1.33333 28.7281 0 27.1429 0H2.85714ZM2.85714 1.42857H27.1429C27.3524 1.42857 27.5551 1.47971 27.7344 1.5625L15.9264 12.4889C15.3808 12.9935 14.6537 12.9936 14.1071 12.4889L2.27679 1.5625C2.45375 1.48232 2.65111 1.42857 2.85714 1.42857ZM1.45093 2.74554L9.83261 10.4911L1.60714 18.4933C1.49861 18.2789 1.42857 18.0359 1.42857 17.7679V2.93529C1.42857 2.86965 1.44393 2.80843 1.45107 2.74554H1.45093ZM28.5491 2.75661C28.5556 2.81597 28.5713 2.87336 28.5713 2.93518V17.7677C28.5713 18.0302 28.5083 18.2708 28.4039 18.4821L20.2008 10.4798L28.549 2.75661H28.5491ZM19.163 11.4396L27.1875 19.2856C27.1725 19.2856 27.1579 19.2856 27.1429 19.2856H2.85714C2.84571 19.2856 2.835 19.2859 2.82357 19.2856L10.8816 11.4508L13.1361 13.5378C14.1959 14.5167 15.8376 14.5181 16.8973 13.5378L19.1629 11.4396H19.163Z" fill="black"/>
          </svg>
          
        <!-- <button type="submit" class="btn" name="commit">
          <span class="form__submit--large">{{ 'general.newsletter_form.submit' | t }}</span>
          <span class="form__submit--small">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-arrow-right" viewBox="0 0 50 15"><path d="M0 9.63V5.38h35V0l15 7.5L35 15V9.63z"/></svg>
          </span>
        </button> -->
      </div>
    </div>
  {%- endunless -%}
{% endform %}
